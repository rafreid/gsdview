# Plan 06-01: File system watcher for .planning/

## Goal
Set up file system watching on the .planning/ directory to detect changes.

## Tasks

1. Use Node.js fs.watch or chokidar for file watching
2. Watch the .planning/ directory recursively
3. Emit events to renderer when files change
4. Debounce rapid changes to avoid excessive updates

## Implementation

### Main process (main.js):
```javascript
const { watch } = require('fs');
const chokidar = require('chokidar');

let watcher = null;

function startWatching(projectPath) {
  if (watcher) {
    watcher.close();
  }

  const planningPath = path.join(projectPath, '.planning');
  watcher = chokidar.watch(planningPath, {
    ignoreInitial: true,
    persistent: true
  });

  let debounceTimer = null;

  watcher.on('all', (event, filePath) => {
    // Debounce to avoid rapid updates
    if (debounceTimer) clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => {
      mainWindow.webContents.send('files-changed', { event, path: filePath });
    }, 500);
  });
}

function stopWatching() {
  if (watcher) {
    watcher.close();
    watcher = null;
  }
}
```

### Preload:
```javascript
onFilesChanged: (callback) => ipcRenderer.on('files-changed', callback)
```

## Verification
- Load a project
- Modify a file in .planning/
- Event is emitted to renderer
