---
phase: 22-bookmarks-history
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/renderer.js
  - src/renderer/index.html
autonomous: true

must_haves:
  truths:
    - "User can save current camera position and selected node as named bookmark"
    - "Pressing keyboard shortcut 1-9 instantly jumps to corresponding saved bookmark"
    - "Pressing Ctrl+1-9 opens save dialog for that bookmark slot"
    - "Bookmarks persist across app restarts"
    - "User can manage bookmarks (view list, delete)"
  artifacts:
    - path: "src/renderer/renderer.js"
      provides: "Bookmark management and keyboard shortcuts"
      contains: "bookmarks"
    - path: "src/renderer/index.html"
      provides: "Bookmark button and dialog"
      contains: "bookmark-btn"
  key_links:
    - from: "bookmark-btn button"
      to: "showBookmarkDialog function"
      via: "click event"
      pattern: "bookmark-btn.*addEventListener"
    - from: "keydown listener"
      to: "goToBookmark function"
      via: "digit key 1-9 triggers navigation"
      pattern: "key.*[1-9].*goToBookmark"
    - from: "keydown listener"
      to: "showBookmarkSaveDialog function"
      via: "Ctrl+digit key 1-9 opens save dialog"
      pattern: "ctrlKey.*[1-9].*showBookmarkSaveDialog"
    - from: "window.electronAPI.store"
      to: "bookmarks"
      via: "persistence"
      pattern: "store\\.(get|set).*bookmarks"
---

<objective>
Implement named bookmarks with keyboard shortcuts 1-9 for instant navigation to saved positions.

Purpose: Users need to quickly jump between important locations in the graph. Named bookmarks with keyboard shortcuts (1-9) provide instant access to saved camera positions and selected nodes.

Output: Bookmark button that opens save dialog, keyboard shortcuts 1-9 for bookmarks, bookmark management UI.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/renderer/renderer.js (selectedNode, Graph.cameraPosition, flyToNodeSmooth, electron-store patterns)
@src/renderer/index.html (toolbar, modal patterns from file-inspector)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Bookmark state and management logic</name>
  <files>src/renderer/renderer.js</files>
  <action>
Add bookmark management logic:

1. Add bookmark state near navigation history state:
```javascript
// Bookmarks (slots 1-9)
let bookmarks = new Array(9).fill(null);  // 9 bookmark slots (accessed via keys 1-9)
```

2. Add bookmark data structure and save function:
```javascript
// Save bookmark at slot (0-8 for keys 1-9)
function saveBookmark(slot, name) {
  if (slot < 0 || slot > 8) return;

  // Get current camera position
  let cameraPos = null;
  if (Graph && Graph.cameraPosition) {
    const pos = Graph.cameraPosition();
    cameraPos = { x: pos.x, y: pos.y, z: pos.z };
  }

  // Create bookmark entry
  bookmarks[slot] = {
    name: name || `Bookmark ${slot + 1}`,
    nodeId: selectedNode ? selectedNode.id : null,
    cameraPosition: cameraPos,
    timestamp: Date.now()
  };

  // Persist to store
  persistBookmarks();

  console.log('[Bookmark] Saved slot', slot + 1, ':', bookmarks[slot].name);

  // Update UI
  updateBookmarkIndicator();
}

// Delete bookmark at slot
function deleteBookmark(slot) {
  if (slot < 0 || slot > 8) return;
  bookmarks[slot] = null;
  persistBookmarks();
  updateBookmarkIndicator();
  console.log('[Bookmark] Deleted slot', slot + 1);
}

// Navigate to bookmark at slot
function goToBookmark(slot) {
  if (slot < 0 || slot > 8) return;

  const bookmark = bookmarks[slot];
  if (!bookmark) {
    showToast(`Bookmark ${slot + 1} is empty`, 'info');
    return;
  }

  // Restore camera position
  if (bookmark.cameraPosition && Graph && Graph.cameraPosition) {
    Graph.cameraPosition(
      bookmark.cameraPosition,
      bookmark.nodeId ? currentGraphData?.nodes?.find(n => n.id === bookmark.nodeId) : null,
      800
    );
  }

  // Select and show node if it exists
  if (bookmark.nodeId) {
    const node = currentGraphData?.nodes?.find(n => n.id === bookmark.nodeId);
    if (node) {
      showDetailsPanel(node);
    } else {
      showToast(`Node no longer exists`, 'warning');
    }
  }

  showToast(`Jumped to: ${bookmark.name}`, 'success');
  console.log('[Bookmark] Go to slot', slot + 1, ':', bookmark.name);
}
```

3. Add persistence functions:
```javascript
// Persist bookmarks to electron-store
async function persistBookmarks() {
  try {
    await window.electronAPI.store.set('bookmarks', bookmarks);
  } catch (err) {
    console.log('[Bookmark] Could not save:', err);
  }
}

// Load bookmarks from electron-store
async function loadBookmarks() {
  try {
    const saved = await window.electronAPI.store.get('bookmarks');
    if (saved && Array.isArray(saved)) {
      bookmarks = saved;
      // Ensure array is exactly 9 slots
      while (bookmarks.length < 9) bookmarks.push(null);
      if (bookmarks.length > 9) bookmarks.length = 9;
      updateBookmarkIndicator();
      console.log('[Bookmark] Loaded', bookmarks.filter(b => b !== null).length, 'bookmarks');
    }
  } catch (err) {
    console.log('[Bookmark] Could not load:', err);
  }
}
```

4. Add keyboard shortcut handler for digits 1-9:
```javascript
// Bookmark keyboard shortcuts (1-9 keys)
// Note: Add this in the existing keydown handler or create one
document.addEventListener('keydown', (e) => {
  // Ignore if typing in input or if modal is open
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
  if (document.getElementById('file-inspector-modal')?.classList.contains('visible')) return;
  if (document.getElementById('bookmark-dialog')?.classList.contains('visible')) return;

  // Number keys 1-9 for bookmarks
  const digit = parseInt(e.key, 10);
  if (digit >= 1 && digit <= 9) {
    const slot = digit - 1;  // Convert to 0-indexed

    if (e.ctrlKey || e.metaKey) {
      // Ctrl/Cmd + 1-9 = Save bookmark
      e.preventDefault();
      showBookmarkSaveDialog(slot);
    } else {
      // Just 1-9 = Go to bookmark
      e.preventDefault();
      goToBookmark(slot);
    }
  }
});
```

5. Add helper to update bookmark button indicator:
```javascript
// Update bookmark button to show count of saved bookmarks
function updateBookmarkIndicator() {
  const btn = document.getElementById('bookmark-btn');
  if (!btn) return;

  const count = bookmarks.filter(b => b !== null).length;
  const badge = btn.querySelector('.bookmark-count');
  if (badge) {
    badge.textContent = count > 0 ? count : '';
    badge.style.display = count > 0 ? 'inline-block' : 'none';
  }
}
```

6. Add toast helper if it doesn't exist. First check if showToast is already defined:
   - Search for existing `function showToast` in the file
   - If NOT found, add the following function
   - If found, do NOT add a duplicate
```javascript
// Show toast notification (if not already defined)
function showToast(message, type = 'info') {
  // Remove existing toast
  const existing = document.querySelector('.toast');
  if (existing) existing.remove();

  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.textContent = message;
  document.body.appendChild(toast);

  // Trigger animation
  requestAnimationFrame(() => toast.classList.add('visible'));

  // Auto-remove after 2s
  setTimeout(() => {
    toast.classList.remove('visible');
    setTimeout(() => toast.remove(), 300);
  }, 2000);
}
```

7. Call loadBookmarks() in DOMContentLoaded (after other load functions).
  </action>
  <verify>
Check renderer.js contains:
- bookmarks array (9 slots)
- saveBookmark, deleteBookmark, goToBookmark functions
- persistBookmarks and loadBookmarks functions
- Keyboard handler for digit keys 1-9
- updateBookmarkIndicator function
- showToast function exists (either newly added or already present) with no duplicates
  </verify>
  <done>Bookmark management logic handles save, delete, navigate, and keyboard shortcuts 1-9</done>
</task>

<task type="auto">
  <name>Task 2: Bookmark button and save dialog UI</name>
  <files>src/renderer/index.html, src/renderer/renderer.js</files>
  <action>
1. In index.html, add bookmark button after nav-controls (around line 2350):
```html
<button id="bookmark-btn" title="Save bookmark (Ctrl+1-9)">
  <span class="bookmark-icon">&#9733;</span>
  <span class="bookmark-count"></span>
</button>
```

2. Add bookmark dialog HTML (after file-inspector-modal, around line 2483):
```html
<!-- Bookmark Save Dialog -->
<div id="bookmark-dialog-overlay" class="hidden"></div>
<div id="bookmark-dialog" class="hidden">
  <div class="dialog-header">
    <h3>Save Bookmark</h3>
    <button id="bookmark-dialog-close">&times;</button>
  </div>
  <div class="dialog-body">
    <div class="dialog-field">
      <label for="bookmark-name">Name:</label>
      <input type="text" id="bookmark-name" placeholder="Enter bookmark name..." maxlength="30">
    </div>
    <div class="dialog-field">
      <label>Slot:</label>
      <div id="bookmark-slots" class="bookmark-slots"></div>
    </div>
    <div class="dialog-info">
      <p id="bookmark-current-info"></p>
    </div>
  </div>
  <div class="dialog-footer">
    <button id="bookmark-save-btn" class="primary">Save</button>
    <button id="bookmark-cancel-btn" class="secondary">Cancel</button>
  </div>
</div>
```

3. Add CSS styles for bookmark button and dialog:
```css
/* Bookmark Button */
#bookmark-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  margin-left: 12px;
  background: rgba(255, 215, 0, 0.15);
  border: 1px solid rgba(255, 215, 0, 0.4);
  border-radius: 4px;
  color: rgba(255, 215, 0, 0.8);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

#bookmark-btn:hover {
  background: rgba(255, 215, 0, 0.25);
  border-color: rgba(255, 215, 0, 0.6);
  color: #FFD700;
}

#bookmark-btn .bookmark-icon {
  font-size: 14px;
}

#bookmark-btn .bookmark-count {
  display: none;
  background: rgba(255, 215, 0, 0.3);
  color: #FFD700;
  font-size: 10px;
  font-weight: bold;
  padding: 1px 5px;
  border-radius: 8px;
  min-width: 16px;
  text-align: center;
}

/* Bookmark Dialog */
#bookmark-dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  z-index: 600;
}

#bookmark-dialog-overlay.hidden,
#bookmark-dialog.hidden {
  display: none;
}

#bookmark-dialog-overlay.visible,
#bookmark-dialog.visible {
  display: block;
}

#bookmark-dialog {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 360px;
  background: #1e1e2e;
  border: 1px solid #FFD700;
  border-radius: 8px;
  z-index: 601;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

#bookmark-dialog .dialog-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid #333;
  background: rgba(255, 215, 0, 0.1);
  border-radius: 8px 8px 0 0;
}

#bookmark-dialog .dialog-header h3 {
  margin: 0;
  font-size: 14px;
  color: #FFD700;
}

#bookmark-dialog-close {
  background: none;
  border: none;
  color: #888;
  font-size: 20px;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

#bookmark-dialog-close:hover {
  color: #fff;
}

#bookmark-dialog .dialog-body {
  padding: 16px;
}

#bookmark-dialog .dialog-field {
  margin-bottom: 16px;
}

#bookmark-dialog .dialog-field label {
  display: block;
  margin-bottom: 6px;
  font-size: 12px;
  color: #888;
  text-transform: uppercase;
}

#bookmark-name {
  width: 100%;
  height: 32px;
  padding: 0 10px;
  background: #2a2a4e;
  border: 1px solid #555;
  border-radius: 4px;
  color: #eee;
  font-size: 13px;
}

#bookmark-name:focus {
  outline: none;
  border-color: #FFD700;
}

.bookmark-slots {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
}

.bookmark-slot {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 36px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid #444;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}

.bookmark-slot:hover {
  background: rgba(255, 215, 0, 0.15);
  border-color: rgba(255, 215, 0, 0.5);
}

.bookmark-slot.selected {
  background: rgba(255, 215, 0, 0.25);
  border-color: #FFD700;
}

.bookmark-slot.occupied {
  background: rgba(78, 205, 196, 0.15);
  border-color: rgba(78, 205, 196, 0.4);
}

.bookmark-slot.occupied:hover {
  border-color: rgba(255, 215, 0, 0.5);
}

.bookmark-slot .slot-number {
  font-size: 14px;
  font-weight: bold;
  color: #888;
}

.bookmark-slot.selected .slot-number,
.bookmark-slot.occupied .slot-number {
  color: #FFD700;
}

.bookmark-slot .slot-indicator {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 6px;
  height: 6px;
  background: #4ECDC4;
  border-radius: 50%;
  display: none;
}

.bookmark-slot.occupied .slot-indicator {
  display: block;
}

.dialog-info {
  font-size: 11px;
  color: #666;
  font-style: italic;
}

#bookmark-dialog .dialog-footer {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid #333;
  justify-content: flex-end;
}

#bookmark-dialog .dialog-footer button {
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

#bookmark-dialog .dialog-footer button.primary {
  background: #FFD700;
  border: none;
  color: #1a1a2e;
  font-weight: 600;
}

#bookmark-dialog .dialog-footer button.primary:hover {
  background: #FFED4A;
}

#bookmark-dialog .dialog-footer button.secondary {
  background: transparent;
  border: 1px solid #555;
  color: #888;
}

#bookmark-dialog .dialog-footer button.secondary:hover {
  border-color: #888;
  color: #ccc;
}
```

4. In renderer.js, add dialog management functions:
```javascript
let currentBookmarkSlot = 0;  // Track selected slot in dialog

// Show bookmark save dialog
function showBookmarkSaveDialog(slot = null) {
  currentBookmarkSlot = slot !== null ? slot : 0;

  // Show dialog
  const overlay = document.getElementById('bookmark-dialog-overlay');
  const dialog = document.getElementById('bookmark-dialog');
  overlay?.classList.remove('hidden');
  overlay?.classList.add('visible');
  dialog?.classList.remove('hidden');
  dialog?.classList.add('visible');

  // Populate slot buttons
  const slotsContainer = document.getElementById('bookmark-slots');
  if (slotsContainer) {
    let html = '';
    for (let i = 0; i < 9; i++) {
      const occupied = bookmarks[i] !== null;
      const selected = i === currentBookmarkSlot;
      html += `<div class="bookmark-slot ${occupied ? 'occupied' : ''} ${selected ? 'selected' : ''}" data-slot="${i}">
        <span class="slot-number">${i + 1}</span>
        <span class="slot-indicator"></span>
      </div>`;
    }
    slotsContainer.innerHTML = html;

    // Add click handlers for slots
    slotsContainer.querySelectorAll('.bookmark-slot').forEach(slotEl => {
      slotEl.addEventListener('click', () => {
        currentBookmarkSlot = parseInt(slotEl.dataset.slot, 10);
        slotsContainer.querySelectorAll('.bookmark-slot').forEach(s => s.classList.remove('selected'));
        slotEl.classList.add('selected');
        updateBookmarkDialogInfo();
      });
    });
  }

  // Set default name
  const nameInput = document.getElementById('bookmark-name');
  if (nameInput) {
    const existingName = bookmarks[currentBookmarkSlot]?.name;
    const nodeName = selectedNode?.name || selectedNode?.id?.split('/').pop() || '';
    nameInput.value = existingName || nodeName || `Bookmark ${currentBookmarkSlot + 1}`;
    nameInput.select();
    nameInput.focus();
  }

  updateBookmarkDialogInfo();
}

// Update dialog info text
function updateBookmarkDialogInfo() {
  const info = document.getElementById('bookmark-current-info');
  if (!info) return;

  const existing = bookmarks[currentBookmarkSlot];
  if (existing) {
    info.textContent = `Slot ${currentBookmarkSlot + 1} contains: "${existing.name}" (will be replaced)`;
  } else {
    info.textContent = `Slot ${currentBookmarkSlot + 1} is empty. Press ${currentBookmarkSlot + 1} key to jump here.`;
  }
}

// Hide bookmark dialog
function hideBookmarkDialog() {
  const overlay = document.getElementById('bookmark-dialog-overlay');
  const dialog = document.getElementById('bookmark-dialog');
  overlay?.classList.remove('visible');
  overlay?.classList.add('hidden');
  dialog?.classList.remove('visible');
  dialog?.classList.add('hidden');
}

// Handle save button
function handleBookmarkSave() {
  const nameInput = document.getElementById('bookmark-name');
  const name = nameInput?.value?.trim() || `Bookmark ${currentBookmarkSlot + 1}`;
  saveBookmark(currentBookmarkSlot, name);
  hideBookmarkDialog();
  showToast(`Saved bookmark ${currentBookmarkSlot + 1}: ${name}`, 'success');
}
```

5. Add event listeners for bookmark UI:
```javascript
// Bookmark button click - show dialog
document.getElementById('bookmark-btn')?.addEventListener('click', () => {
  showBookmarkSaveDialog();
});

// Dialog close button
document.getElementById('bookmark-dialog-close')?.addEventListener('click', hideBookmarkDialog);

// Cancel button
document.getElementById('bookmark-cancel-btn')?.addEventListener('click', hideBookmarkDialog);

// Save button
document.getElementById('bookmark-save-btn')?.addEventListener('click', handleBookmarkSave);

// Close dialog on overlay click
document.getElementById('bookmark-dialog-overlay')?.addEventListener('click', hideBookmarkDialog);

// Enter key in name input saves bookmark
document.getElementById('bookmark-name')?.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    handleBookmarkSave();
  }
  if (e.key === 'Escape') {
    e.preventDefault();
    hideBookmarkDialog();
  }
});
```

6. Initialize bookmark indicator on startup (after loadBookmarks):
```javascript
updateBookmarkIndicator();
```
  </action>
  <verify>
Run `npm run build` and `npm start`.
1. Bookmark button (star icon) appears in toolbar with gold theme
2. Click bookmark button - save dialog opens
3. Dialog shows 9 slot buttons (1-9), occupied slots have indicator
4. Click a slot to select it, enter name, click Save
5. Toast confirms bookmark saved
6. Press number key 1-9 - jumps to that bookmark (if saved)
7. Press Ctrl+1-9 - opens save dialog with that slot selected
8. Bookmark count badge shows number of saved bookmarks
9. Bookmarks persist across app restart
  </verify>
  <done>Bookmark button and save dialog work with slot selection and keyboard shortcuts</done>
</task>

<task type="auto">
  <name>Task 3: Bookmark list and delete functionality</name>
  <files>src/renderer/renderer.js, src/renderer/index.html</files>
  <action>
1. Add a bookmark list section to the dialog body (in index.html, after dialog-info):
```html
<div class="bookmark-list-section">
  <label>Saved Bookmarks:</label>
  <div id="bookmark-list"></div>
</div>
```

2. Add CSS for bookmark list:
```css
.bookmark-list-section {
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px solid #333;
}

.bookmark-list-section label {
  display: block;
  margin-bottom: 8px;
  font-size: 12px;
  color: #888;
  text-transform: uppercase;
}

#bookmark-list {
  max-height: 150px;
  overflow-y: auto;
}

.bookmark-list-item {
  display: flex;
  align-items: center;
  padding: 8px;
  margin-bottom: 4px;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 4px;
  transition: background 0.15s;
}

.bookmark-list-item:hover {
  background: rgba(255, 255, 255, 0.08);
}

.bookmark-list-item .bm-slot {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 215, 0, 0.2);
  border-radius: 4px;
  font-size: 12px;
  font-weight: bold;
  color: #FFD700;
  margin-right: 10px;
  flex-shrink: 0;
}

.bookmark-list-item .bm-name {
  flex: 1;
  font-size: 12px;
  color: #ccc;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.bookmark-list-item .bm-go {
  padding: 4px 8px;
  margin-right: 6px;
  background: rgba(78, 205, 196, 0.2);
  border: 1px solid rgba(78, 205, 196, 0.4);
  border-radius: 3px;
  color: #4ECDC4;
  font-size: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.bookmark-list-item .bm-go:hover {
  background: rgba(78, 205, 196, 0.4);
  color: #fff;
}

.bookmark-list-item .bm-delete {
  padding: 4px 8px;
  background: transparent;
  border: 1px solid rgba(231, 76, 60, 0.4);
  border-radius: 3px;
  color: rgba(231, 76, 60, 0.7);
  font-size: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.bookmark-list-item .bm-delete:hover {
  background: rgba(231, 76, 60, 0.2);
  border-color: #E74C3C;
  color: #E74C3C;
}

.bookmark-empty {
  color: #555;
  font-size: 11px;
  font-style: italic;
  text-align: center;
  padding: 12px;
}

/* Scrollbar for bookmark list */
#bookmark-list::-webkit-scrollbar {
  width: 6px;
}

#bookmark-list::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

#bookmark-list::-webkit-scrollbar-thumb {
  background: #FFD700;
  border-radius: 3px;
}
```

3. In renderer.js, add function to update bookmark list:
```javascript
// Update bookmark list in dialog
function updateBookmarkList() {
  const listContainer = document.getElementById('bookmark-list');
  if (!listContainer) return;

  const savedBookmarks = bookmarks
    .map((b, i) => b ? { ...b, slot: i } : null)
    .filter(b => b !== null);

  if (savedBookmarks.length === 0) {
    listContainer.innerHTML = '<div class="bookmark-empty">No bookmarks saved. Press Ctrl+1-9 to save.</div>';
    return;
  }

  let html = '';
  savedBookmarks.forEach(b => {
    html += `<div class="bookmark-list-item" data-slot="${b.slot}">
      <span class="bm-slot">${b.slot + 1}</span>
      <span class="bm-name">${b.name}</span>
      <button class="bm-go" data-slot="${b.slot}">Go</button>
      <button class="bm-delete" data-slot="${b.slot}">Delete</button>
    </div>`;
  });

  listContainer.innerHTML = html;

  // Add event listeners
  listContainer.querySelectorAll('.bm-go').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const slot = parseInt(btn.dataset.slot, 10);
      hideBookmarkDialog();
      goToBookmark(slot);
    });
  });

  listContainer.querySelectorAll('.bm-delete').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      const slot = parseInt(btn.dataset.slot, 10);
      deleteBookmark(slot);
      updateBookmarkList();
      updateBookmarkDialogSlots();
    });
  });
}

// Update slot indicators after delete
function updateBookmarkDialogSlots() {
  const slotsContainer = document.getElementById('bookmark-slots');
  if (!slotsContainer) return;

  slotsContainer.querySelectorAll('.bookmark-slot').forEach(slotEl => {
    const slot = parseInt(slotEl.dataset.slot, 10);
    if (bookmarks[slot]) {
      slotEl.classList.add('occupied');
    } else {
      slotEl.classList.remove('occupied');
    }
  });
}
```

4. Modify showBookmarkSaveDialog to also update the list:
In showBookmarkSaveDialog, add at the end:
```javascript
// Update bookmark list
updateBookmarkList();
```

5. Modify deleteBookmark to handle UI update when dialog is open:
Add to end of deleteBookmark:
```javascript
// Update dialog if open
if (document.getElementById('bookmark-dialog')?.classList.contains('visible')) {
  updateBookmarkList();
  updateBookmarkDialogSlots();
}
```
  </action>
  <verify>
Run `npm run build` and `npm start`.
1. Open bookmark dialog - shows list of saved bookmarks
2. Each bookmark shows slot number, name, Go button, Delete button
3. Click Go - dialog closes, navigates to bookmark
4. Click Delete - bookmark removed, list and slots update immediately
5. Empty state shows helpful message when no bookmarks
6. Delete persists across app restart
  </verify>
  <done>Bookmark list shows saved bookmarks with go/delete actions</done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build`
2. App launches: `npm start`
3. Bookmark button appears in toolbar with gold star icon
4. Click button - dialog opens with slot selection and name input
5. Save bookmark - appears in list, slot shows occupied
6. Press 1-9 key - jumps to corresponding bookmark (if set)
7. Press Ctrl/Cmd+1-9 - opens dialog with that slot pre-selected
8. Bookmark list shows all saved bookmarks
9. Go button navigates to bookmark location
10. Delete button removes bookmark from slot
11. Bookmarks persist across app restart
12. Badge shows count of saved bookmarks
</verification>

<success_criteria>
- Bookmark button opens save dialog
- User can save camera position and selected node as named bookmark
- 9 slots available (keys 1-9)
- Number keys 1-9 instantly jump to corresponding bookmark
- Ctrl+1-9 opens save dialog for that slot
- Bookmark list shows saved bookmarks with go/delete actions
- Bookmarks persist via electron-store
</success_criteria>

<output>
After completion, create `.planning/phases/22-bookmarks-history/22-02-SUMMARY.md`
</output>
