---
phase: 31-view-switching
plan: 03
type: execute
wave: 3
depends_on: ["31-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can click tabs to switch views without errors"
    - "Selection persists visually when switching back to graph"
    - "Keyboard shortcuts work correctly after view switch"
    - "No memory leaks after multiple view switches"
    - "Transitions are smooth without flashing"
  artifacts: []
  key_links: []
---

<objective>
Verify view switching works end-to-end with human testing.

Purpose: Automated tests cannot fully verify visual behavior like smooth transitions, selection highlighting, and keyboard responsiveness. Human verification ensures the user experience meets expectations.

Output: Verified working view switching with all requirements (VIEW-01 through VIEW-04) confirmed.
</objective>

<execution_context>
@/home/rafreid/.claude/get-shit-done/workflows/execute-plan.md
@/home/rafreid/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/31-view-switching/31-01-SUMMARY.md
@.planning/phases/31-view-switching/31-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete view switching infrastructure with tab controls, lifecycle management, selection persistence, and keyboard routing</what-built>
  <how-to-verify>
1. Start the application:
   ```
   npm start
   ```

2. Open a project folder (the GSDv project itself works well)

3. **Test VIEW-01: Tab Controls**
   - [ ] See "Graph" and "Diagram" tabs in the toolbar
   - [ ] Click "Diagram" tab - view switches to show placeholder
   - [ ] Click "Graph" tab - view switches back to 3D graph
   - [ ] Active tab has teal underline/highlight

4. **Test VIEW-02: Selection Persistence**
   - [ ] Click a node in the graph to select it (details panel opens)
   - [ ] Click "Diagram" tab to switch views
   - [ ] Click "Graph" tab to switch back
   - [ ] The same node should still be selected (details panel visible)
   - [ ] The node should be visually highlighted

5. **Test VIEW-03: Keyboard Shortcuts**
   - [ ] Select a node, then press Ctrl+1 (or Cmd+1) to bookmark it
   - [ ] Switch to Diagram view
   - [ ] Press 1 - nothing should happen (diagram doesn't handle bookmarks yet)
   - [ ] Switch back to Graph view
   - [ ] Press 1 - camera should fly to the bookmarked node
   - [ ] Try arrow keys for navigation in graph view - should work

6. **Test VIEW-04: File Watcher (if hooks enabled)**
   - [ ] With graph view active, edit a file in the project
   - [ ] Observe flash animation on the changed node
   - [ ] Switch to Diagram view
   - [ ] Edit another file
   - [ ] Switch back to Graph view - no error, graph still functional

7. **Test Memory/Performance**
   - [ ] Open DevTools (Ctrl+Shift+I)
   - [ ] Switch between views 10+ times rapidly
   - [ ] Check Memory tab - no significant leak
   - [ ] Check Console - no repeated errors

8. **Test Smooth Transitions**
   - [ ] View switches happen immediately (no delay)
   - [ ] No flashing or layout jumping during switch
   - [ ] Tree panel (if visible) doesn't flicker
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification checkpoint - all VIEW-* requirements tested manually.
</verification>

<success_criteria>
1. All 8 test sections pass (VIEW-01 through VIEW-04 plus memory/performance/transitions)
2. No console errors during view switching
3. User experience is smooth and intuitive
</success_criteria>

<output>
After verification passes, create `.planning/phases/31-view-switching/31-03-SUMMARY.md` documenting:
- Test results for each VIEW-* requirement
- Any issues found and fixed
- Performance observations
</output>
