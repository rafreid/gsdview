---
phase: 02-graph-rendering
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/renderer.js
autonomous: true

must_haves:
  truths:
    - "Edges are visible as lines connecting related nodes"
    - "Edge visibility works at various zoom levels"
    - "Edges don't obscure node labels or colors"
    - "Edge direction is discernible (parent -> child flow)"
  artifacts:
    - path: "src/renderer/renderer.js"
      provides: "Enhanced edge styling configuration"
      contains: "linkWidth"
  key_links:
    - from: "graphData links"
      to: "edge rendering"
      via: "ForceGraph3D link configuration"
      pattern: "\\.link(Color|Width|Opacity|DirectionalParticles)"
---

<objective>
Implement enhanced edge styling for clear relationship visualization between nodes.

Purpose: Users need to see and follow connections between nodes to understand project structure relationships.
Output: Edges are clearly visible, styled appropriately, and show directional flow.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@src/renderer/renderer.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance edge visibility and styling</name>
  <files>src/renderer/renderer.js</files>
  <action>
Improve the edge (link) styling for better visibility and aesthetics:

Current state: `.linkColor(() => 'rgba(255,255,255,0.2)')` and `.linkWidth(1)`

Update the ForceGraph3D configuration to include:

1. Increase link visibility:
   - `.linkColor(() => 'rgba(255, 255, 255, 0.4)')` - slightly more opaque
   - `.linkWidth(1.5)` - slightly thicker for visibility

2. Add link opacity for depth perception:
   - `.linkOpacity(0.6)` - semi-transparent to not overwhelm

3. Add directional indicators using particles:
   - `.linkDirectionalParticles(2)` - small particles flowing along edges
   - `.linkDirectionalParticleWidth(2)` - particle size
   - `.linkDirectionalParticleSpeed(0.005)` - slow, subtle movement
   - `.linkDirectionalParticleColor(() => 'rgba(255, 255, 255, 0.8)')` - bright particles

4. Optional: Add curved links for better visual separation:
   - `.linkCurvature(0.1)` - slight curve to distinguish overlapping edges

The directional particles show parent -> child flow (source -> target), helping users understand the hierarchy direction.
  </action>
  <verify>
1. Run `npm start`
2. Verify edges are visible as lines between nodes
3. Verify small particles flow along edges from source to target
4. Verify edges don't obscure node colors or make the graph too busy
5. Zoom in and out - edges should remain visible at different scales
  </verify>
  <done>
Edges display with improved visibility. Directional particles indicate flow direction. Edges work well at various zoom levels.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add edge hover highlighting</name>
  <files>src/renderer/renderer.js</files>
  <action>
Add interactive highlighting when hovering over edges to help users trace connections:

1. Configure link hover behavior:
   - `.onLinkHover(link => { ... })` - callback when hovering a link

2. In the hover callback:
   - When hovering a link: highlight it by changing width or color
   - When not hovering (link is null): reset to default

3. Implementation approach using linkWidth as a function:
   - Store the currently hovered link in a variable (e.g., `let hoveredLink = null`)
   - `.linkWidth(link => link === hoveredLink ? 3 : 1.5)`
   - In onLinkHover: set hoveredLink and trigger re-render

4. Alternative simpler approach (if above is complex):
   - Just log the hover for now and rely on the particle direction
   - The particles already provide good visual feedback

5. Ensure the cursor changes to pointer when hovering links:
   - The library may handle this automatically, or add CSS if needed

Note: 3d-force-graph may require specific approaches for reactive updates. Check the library documentation if the hover effect doesn't update visually.
  </action>
  <verify>
1. Run `npm start`
2. Hover over edges - they should highlight or provide visual feedback
3. Verify cursor changes appropriately
4. Verify the interaction feels responsive
  </verify>
  <done>
Edges provide visual feedback on hover. Users can trace connections interactively.
  </done>
</task>

</tasks>

<verification>
- [ ] App launches without errors
- [ ] Edges are clearly visible between connected nodes
- [ ] Directional particles flow from source to target
- [ ] Edge visibility works at different zoom levels
- [ ] Edges don't make the visualization too cluttered
- [ ] GRF-04 requirement is satisfied
</verification>

<success_criteria>
Edges visually connect related nodes with visible lines. Direction is discernible via particle animation. Edge styling is clean and doesn't overwhelm the graph.
</success_criteria>

<output>
After completion, create `.planning/phases/02-graph-rendering/02-03-SUMMARY.md`
</output>
