---
phase: 02-graph-rendering
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/renderer/renderer.js
autonomous: true

must_haves:
  truths:
    - "Phase nodes are visually distinct from plan nodes"
    - "Requirement nodes are visually distinct from task nodes"
    - "File nodes are visually distinct from other types"
    - "All node types use accessible color contrast against dark background"
  artifacts:
    - path: "src/renderer/renderer.js"
      provides: "Complete color palette for all node types"
      contains: "nodeColors"
  key_links:
    - from: "nodeColors object"
      to: ".nodeColor() method"
      via: "lookup by node.type"
      pattern: "nodeColors\\[node\\.type\\]"
---

<objective>
Implement comprehensive color coding for all GSD node types with accessible, distinct colors.

Purpose: Users need to instantly identify node types by color to understand project structure at a glance.
Output: Enhanced nodeColors palette with colors optimized for visibility against dark background.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@src/renderer/renderer.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance node color palette</name>
  <files>src/renderer/renderer.js</files>
  <action>
Update the nodeColors object to provide accessible, distinct colors for ALL node types:

Current types to support:
- root: Project root node (keep prominent)
- phase: Phase nodes (major milestones)
- plan: Plan nodes (work units)
- task: Task nodes (individual work items)
- requirement: Requirement nodes (specs/goals)
- file: File reference nodes (source files)

Color requirements:
1. All colors must have good contrast against #1a1a2e background (min 4.5:1 ratio)
2. Each type must be visually distinct from others (no similar hues)
3. Use a cohesive palette that works well together

Recommended palette (WCAG AA compliant against dark background):
- root: '#FF6B6B' (coral red - focal point)
- phase: '#4ECDC4' (teal - major structure)
- plan: '#45B7D1' (sky blue - work units)
- task: '#98D8C8' (mint green - granular items)
- requirement: '#F7DC6F' (gold - specifications)
- file: '#DDA0DD' (plum - source references)

Add a default fallback color for unknown types: '#888888' (neutral gray)
  </action>
  <verify>
1. Run `npm start` and verify the app launches
2. Observe that different node types display in distinct colors
3. Verify colors are readable against the dark background
  </verify>
  <done>
nodeColors object contains entries for root, phase, plan, task, requirement, file with distinct, accessible colors
  </done>
</task>

<task type="auto">
  <name>Task 2: Add color legend to UI</name>
  <files>src/renderer/index.html, src/renderer/renderer.js</files>
  <action>
Add a small color legend overlay in the bottom-left corner of the graph view to help users understand the color coding.

In index.html:
1. Add a div with id="color-legend" positioned fixed at bottom-left
2. Style it with semi-transparent dark background, padding, and small font

In renderer.js:
1. After Graph initialization, dynamically populate the legend by iterating over nodeColors
2. Create a small colored circle + label for each node type
3. Format type names nicely (capitalize first letter, e.g., "Phase", "Plan")

Legend styling:
- Background: rgba(0, 0, 0, 0.7)
- Border-radius: 8px
- Padding: 12px
- Font-size: 12px
- Position: fixed, bottom: 20px, left: 20px
- z-index: 100 (above graph)
  </action>
  <verify>
1. Run `npm start`
2. Verify legend appears in bottom-left corner
3. Verify legend shows all node types with correct colors
4. Verify legend is readable and doesn't obstruct graph interaction
  </verify>
  <done>
Color legend displays in UI showing all node type colors with labels
  </done>
</task>

</tasks>

<verification>
- [ ] App launches without errors
- [ ] All node types display in distinct colors
- [ ] Colors have good contrast against #1a1a2e background
- [ ] Color legend is visible and accurate
- [ ] GRF-02 requirement is satisfied
</verification>

<success_criteria>
Different node types (phases, plans, tasks, requirements, files) have distinct colors that are easily distinguishable. A color legend helps users understand the color coding.
</success_criteria>

<output>
After completion, create `.planning/phases/02-graph-rendering/02-01-SUMMARY.md`
</output>
