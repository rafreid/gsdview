---
phase: 01-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - package.json
  - src/renderer/index.html
  - src/renderer/renderer.js
autonomous: true

must_haves:
  truths:
    - "User sees a 3D force-directed graph in the window"
    - "User can orbit the graph by click-dragging"
    - "User can zoom with scroll wheel"
    - "User can pan with right-click drag"
  artifacts:
    - path: "src/renderer/renderer.js"
      provides: "3d-force-graph initialization"
      contains: "ForceGraph3D"
    - path: "package.json"
      provides: "3d-force-graph dependency"
      contains: "3d-force-graph"
  key_links:
    - from: "src/renderer/index.html"
      to: "src/renderer/renderer.js"
      via: "script tag"
      pattern: '<script.*renderer.js'
    - from: "src/renderer/renderer.js"
      to: "graph-container"
      via: "DOM selector"
      pattern: "getElementById.*graph-container"
---

<objective>
Integrate 3d-force-graph library and render a placeholder graph with navigation controls.

Purpose: This fulfills GRF-01 (3D force-directed graph) and NAV-01/02/03 (orbit, zoom, pan). The library provides these navigation controls out of the box.
Output: A visible 3D graph with placeholder nodes that the user can navigate around.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install 3d-force-graph dependency</name>
  <files>package.json</files>
  <action>
Install 3d-force-graph as a runtime dependency:
```
npm install 3d-force-graph
```

This library uses Three.js internally and provides:
- 3D force-directed layout
- Built-in camera controls (orbit, zoom, pan)
- Node and link rendering

Note: 3d-force-graph works in browser context. In Electron renderer, we can use it directly.
  </action>
  <verify>
`npm list 3d-force-graph` shows installed version.
package.json contains "3d-force-graph" in dependencies.
  </verify>
  <done>3d-force-graph library installed</done>
</task>

<task type="auto">
  <name>Task 2: Create renderer script with graph initialization</name>
  <files>src/renderer/renderer.js, src/renderer/index.html</files>
  <action>
Create src/renderer/renderer.js:

1. Import ForceGraph3D from '3d-force-graph' (use ES module import - Electron renderer supports this)
2. Define placeholder graph data:
```javascript
const placeholderData = {
  nodes: [
    { id: 'project', name: 'Project', type: 'root' },
    { id: 'phase1', name: 'Phase 1', type: 'phase' },
    { id: 'phase2', name: 'Phase 2', type: 'phase' },
    { id: 'plan1-1', name: 'Plan 1.1', type: 'plan' },
    { id: 'plan1-2', name: 'Plan 1.2', type: 'plan' },
    { id: 'plan2-1', name: 'Plan 2.1', type: 'plan' }
  ],
  links: [
    { source: 'project', target: 'phase1' },
    { source: 'project', target: 'phase2' },
    { source: 'phase1', target: 'plan1-1' },
    { source: 'phase1', target: 'plan1-2' },
    { source: 'phase2', target: 'plan2-1' }
  ]
};
```

3. Initialize ForceGraph3D:
```javascript
const Graph = ForceGraph3D()
  (document.getElementById('graph-container'))
  .graphData(placeholderData)
  .nodeLabel('name')
  .nodeColor(node => {
    // Simple color by type for now
    const colors = { root: '#ff6b6b', phase: '#4ecdc4', plan: '#45b7d1' };
    return colors[node.type] || '#999';
  })
  .linkColor(() => 'rgba(255,255,255,0.2)')
  .backgroundColor('#1a1a2e');
```

4. Handle window resize:
```javascript
window.addEventListener('resize', () => {
  Graph.width(window.innerWidth);
  Graph.height(window.innerHeight);
});
```

Update src/renderer/index.html:
- Add script tag to load renderer.js (type="module" for ES imports)
- Ensure graph-container div has full viewport sizing via CSS
- Remove the placeholder text (h1/p) since graph will fill the space
  </action>
  <verify>
`npm start` shows 3D graph with colored nodes.
Nodes are connected by links.
Graph has dark background.
  </verify>
  <done>3D graph renders with placeholder data</done>
</task>

<task type="auto">
  <name>Task 3: Verify navigation controls work</name>
  <files>(none - verification only)</files>
  <action>
Run `npm start` and verify all navigation controls work:

1. Orbit (rotate): Click and drag anywhere on the graph to rotate the camera around the center
2. Zoom: Use scroll wheel to zoom in and out
3. Pan: Right-click and drag to pan the view

These controls are built into 3d-force-graph via Three.js OrbitControls - no additional code needed.

If controls don't work, check:
- Graph container has proper dimensions (width/height not 0)
- No CSS pointer-events: none blocking interaction
- Window is focused

Document any quirks discovered for future reference.
  </action>
  <verify>
Orbit: Camera rotates around graph when click-dragging
Zoom: View zooms in/out with scroll wheel
Pan: View pans when right-click dragging
  </verify>
  <done>All navigation controls (NAV-01, NAV-02, NAV-03) working</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm start` launches app with visible 3D graph
2. Placeholder nodes (project, phases, plans) visible and connected
3. User can orbit by click-dragging
4. User can zoom with scroll wheel
5. User can pan with right-click drag
6. Graph fills the window and resizes properly
</verification>

<success_criteria>
- GRF-01: Graph renders as 3D force-directed layout - VERIFIED
- NAV-01: User can orbit view - VERIFIED
- NAV-02: User can zoom - VERIFIED
- NAV-03: User can pan - VERIFIED
- Ready for real GSD data parsing in later phases
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
